# üß™ –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Signal Statistics System

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
2. [–¢–µ—Å—Ç 1: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã](#—Ç–µ—Å—Ç-1-–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º—ã)
3. [–¢–µ—Å—Ç 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤](#—Ç–µ—Å—Ç-2-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-—Å–∏–≥–Ω–∞–ª–æ–≤)
4. [–¢–µ—Å—Ç 3: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤](#—Ç–µ—Å—Ç-3-–ø—Ä–æ—Å–º–æ—Ç—Ä-–∞–∫—Ç–∏–≤–Ω—ã—Ö-—Å–∏–≥–Ω–∞–ª–æ–≤)
5. [–¢–µ—Å—Ç 4: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏](#—Ç–µ—Å—Ç-4-–ø—Ä–æ—Å–º–æ—Ç—Ä-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
6. [–¢–µ—Å—Ç 5: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –≤–∏–Ω—Ä–µ–π—Ç–∞](#—Ç–µ—Å—Ç-5-–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π-—Ä–∞—Å—á–µ—Ç-–≤–∏–Ω—Ä–µ–π—Ç–∞)
7. [–¢–µ—Å—Ç 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç](#—Ç–µ—Å—Ç-6-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π-—Ç–µ—Å—Ç)
8. [–ß–µ–∫–ª–∏—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏](#—á–µ–∫–ª–∏—Å—Ç-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

---

## üì¶ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /home/user/signals_statistics_system
pip install pydantic requests python-dotenv gradio pandas
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –í—Å–µ –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

```bash
ls -la src/
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚úÖ models/
‚úÖ services/
‚úÖ storage/
‚úÖ exchanges/
‚úÖ ui/
‚úÖ utils/
‚úÖ main_new.py
```

### –®–∞–≥ 3: –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
rm -f data/signals.json
mkdir -p data
```

---

## üß™ –¢–µ—Å—Ç 1: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

### –®–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É:**

```bash
python3 run.py
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å:**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
============================================================
üöÄ Starting Signal Statistics System...
============================================================

üìä Access the web interface at:
   http://localhost:7860

Press Ctrl+C to stop
============================================================

üöÄ Signal Statistics System v2.0
üìä Telegram Channel Winrate Tracker
üíæ Storage initialized: .../data/signals.json
‚úÖ Statistics calculator initialized
üé® Launching Gradio UI...
Running on local URL:  http://0.0.0.0:7860
```

3. **–û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä:**

```
http://localhost:7860
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –û—Ç–∫—Ä—ã–ª–∞—Å—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
‚úÖ –í–∏–¥–Ω—ã 3 –≤–∫–ª–∞–¥–∫–∏:
   - ‚ûï Add Signal
   - üìã Active Signals
   - üìä Channel Statistics
```

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –í—Å–µ 3 –≤–∫–ª–∞–¥–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## üß™ –¢–µ—Å—Ç 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ –≤–µ–±-—Ñ–æ—Ä–º—É.

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

#### –°–∏–≥–Ω–∞–ª 1: VIP Channel - WIN —Å–∏–≥–Ω–∞–ª
```
Signal Name:         BTC Long #1
Channel Name:        VIP Crypto Signals
Trading Symbol:      BTCUSDT
Exchange:            binance
Entry Condition:     above
Target Price:        0 (–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)
Take Profit (TP):    100000
Stop Loss (SL):      40000
```

#### –°–∏–≥–Ω–∞–ª 2: VIP Channel - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π LOSS
```
Signal Name:         ETH Long #1
Channel Name:        VIP Crypto Signals
Trading Symbol:      ETHUSDT
Exchange:            binance
Entry Condition:     above
Target Price:        0
Take Profit (TP):    5000
Stop Loss (SL):      2500
```

#### –°–∏–≥–Ω–∞–ª 3: Budget Channel - WIN —Å–∏–≥–Ω–∞–ª
```
Signal Name:         BNB Trade #1
Channel Name:        Budget Trading Channel
Trading Symbol:      BNBUSDT
Exchange:            binance
Entry Condition:     above
Target Price:        0
Take Profit (TP):    700
Stop Loss (SL):      500
```

### –®–∞–≥–∏

1. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "‚ûï Add Signal"**

2. **–î–æ–±–∞–≤–∏—Ç—å –°–∏–≥–Ω–∞–ª 1:**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ "–°–∏–≥–Ω–∞–ª 1"
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "Add Signal"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Signal 'BTC Long #1' added successfully for channel 'VIP Crypto Signals'!
```

3. **–î–æ–±–∞–≤–∏—Ç—å –°–∏–≥–Ω–∞–ª 2:**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ "–°–∏–≥–Ω–∞–ª 2"
   - –ù–∞–∂–∞—Ç—å "Add Signal"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Signal 'ETH Long #1' added successfully for channel 'VIP Crypto Signals'!
```

4. **–î–æ–±–∞–≤–∏—Ç—å –°–∏–≥–Ω–∞–ª 3:**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ "–°–∏–≥–Ω–∞–ª 3"
   - –ù–∞–∂–∞—Ç—å "Add Signal"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Signal 'BNB Trade #1' added successfully for channel 'Budget Trading Channel'!
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

5. **–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ - –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ:**
   - –û—Å—Ç–∞–≤–∏—Ç—å "Signal Name" –ø—É—Å—Ç—ã–º
   - –ù–∞–∂–∞—Ç—å "Add Signal"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ùå Error: Name, Channel Name, and Symbol are required!
```

6. **–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ - –Ω–µ–≤–µ—Ä–Ω—ã–µ TP/SL:**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø–æ–ª—è
   - TP = 100, SL = 200 (SL > TP - –Ω–µ–≤–µ—Ä–Ω–æ!)
   - –ù–∞–∂–∞—Ç—å "Add Signal"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ùå Error: Take Profit must be greater than Stop Loss!
```

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- [ ] –í—Å–µ 3 —Å–∏–≥–Ω–∞–ª–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–∞–Ω–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üß™ –¢–µ—Å—Ç 3: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.

### –®–∞–≥–∏

1. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "üìã Active Signals"**

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–∏–≥–Ω–∞–ª–æ–≤:**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
–¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏:
```
| Name        | Channel              | Symbol   | TP         | SL         | Status | Outcome |
|-------------|----------------------|----------|------------|------------|--------|---------|
| BTC Long #1 | VIP Crypto Signals   | BTCUSDT  | $100000.00 | $40000.00  | active | pending |
| ETH Long #1 | VIP Crypto Signals   | ETHUSDT  | $5000.00   | $2500.00   | active | pending |
| BNB Trade #1| Budget Trading...    | BNBUSDT  | $700.00    | $500.00    | active | pending |
```

3. **–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "üîÑ Refresh"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –¢–∞–±–ª–∏—Ü–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å
‚úÖ –î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ
```

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- [ ] –í—Å–µ 3 —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (TP, SL, –∫–∞–Ω–∞–ª—ã)
- [ ] Status = "active"
- [ ] Outcome = "pending"
- [ ] –ö–Ω–æ–ø–∫–∞ Refresh —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üß™ –¢–µ—Å—Ç 4: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–∞–Ω–∞–ª–∞–º.

### –®–∞–≥–∏

1. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "üìä Channel Statistics"**

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–∞–Ω–∞–ª–æ–≤:**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
| Channel                  | Total Signals | Active | Closed | Wins | Losses | Winrate |
|--------------------------|---------------|--------|--------|------|--------|---------|
| VIP Crypto Signals       | 2             | 2      | 0      | 0    | 0      | 0.0%    |
| Budget Trading Channel   | 1             | 1      | 0      | 0    | 0      | 0.0%    |
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–¥–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä Overall Statistics

Total Channels: 2
Total Signals: 3
Total Wins: 0
Total Losses: 0
Overall Winrate: 0.0%
```

4. **–ù–∞–∂–∞—Ç—å "üîÑ Refresh Statistics"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å
```

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- [ ] –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –æ–±–∞ –∫–∞–Ω–∞–ª–∞
- [ ] Total Signals –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (2 –∏ 1)
- [ ] Winrate = 0% (—Å–∏–≥–Ω–∞–ª—ã –µ—â–µ –Ω–µ –∑–∞–∫—Ä—ã—Ç—ã)
- [ ] –°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

---

## üß™ –¢–µ—Å—Ç 5: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –≤–∏–Ω—Ä–µ–π—Ç–∞

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤.

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∑–∞–∫—Ä—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏:

1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**

```bash
cat > test_close_signals.py << 'EOF'
#!/usr/bin/env python3
import sys
import os
import asyncio

PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, os.path.join(PROJECT_ROOT, 'src'))

from src.storage.json_storage import JSONStorage
from src.services.stats_calculator import StatsCalculator
from src.models.signal import SignalStatus, SignalOutcome
from datetime import datetime

async def close_test_signals():
    print("üîÑ Closing test signals...")
    storage = JSONStorage("data/signals.json")
    stats = StatsCalculator(storage)

    # –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã
    signals = await storage.load_signals()
    print(f"üìä Found {len(signals)} signals")

    # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 2 —Å–∏–≥–Ω–∞–ª–∞ –∫–∞–∫ WIN
    for i, signal in enumerate(signals[:2]):
        signal.status = SignalStatus.CLOSED
        signal.outcome = SignalOutcome.WIN
        signal.closed_at = datetime.now()
        signal.active = False
        await storage.update_signal(signal)
        print(f"‚úÖ Closed '{signal.name}' as WIN")

    # –ó–∞–∫—Ä—ã–≤–∞–µ–º 3-–π —Å–∏–≥–Ω–∞–ª –∫–∞–∫ LOSS
    if len(signals) >= 3:
        signal = signals[2]
        signal.status = SignalStatus.CLOSED
        signal.outcome = SignalOutcome.LOSS
        signal.closed_at = datetime.now()
        signal.active = False
        await storage.update_signal(signal)
        print(f"‚ùå Closed '{signal.name}' as LOSS")

    # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    print("\nüìä Updating statistics...")
    await stats.update_all_statistics()
    print("‚úÖ Statistics updated!")

    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    print("\nüìà Results:")
    for channel_name in ["VIP Crypto Signals", "Budget Trading Channel"]:
        channel_stats = await stats.calculate_channel_stats(channel_name)
        if channel_stats and channel_stats.total_signals > 0:
            print(f"\n{channel_name}:")
            print(f"  Total: {channel_stats.total_signals}")
            print(f"  Wins: {channel_stats.wins}")
            print(f"  Losses: {channel_stats.losses}")
            print(f"  Winrate: {channel_stats.winrate}%")

asyncio.run(close_test_signals())
EOF

chmod +x test_close_signals.py
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:**

```bash
python3 test_close_signals.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üîÑ Closing test signals...
üìä Found 3 signals
‚úÖ Closed 'BTC Long #1' as WIN
‚úÖ Closed 'ETH Long #1' as WIN
‚ùå Closed 'BNB Trade #1' as LOSS

üìä Updating statistics...
‚úÖ Statistics updated!

üìà Results:

VIP Crypto Signals:
  Total: 2
  Wins: 2
  Losses: 0
  Winrate: 100.0%

Budget Trading Channel:
  Total: 1
  Wins: 0
  Losses: 1
  Winrate: 0.0%
```

3. **–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

4. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "üìã Active Signals"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è (–≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã –∑–∞–∫—Ä—ã—Ç—ã)
```

5. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "üìä Channel Statistics"**

6. **–ù–∞–∂–∞—Ç—å "üîÑ Refresh Statistics"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
| Channel                  | Total | Active | Closed | Wins | Losses | Winrate  |
|--------------------------|-------|--------|--------|------|--------|----------|
| VIP Crypto Signals       | 2     | 0      | 2      | 2    | 0      | 100.0%   |
| Budget Trading Channel   | 1     | 0      | 1      | 0    | 1      | 0.0%     |

üìä Overall Statistics
Total Channels: 2
Total Signals: 3
Total Wins: 2
Total Losses: 1
Overall Winrate: 66.67%

üèÜ Best Channel: VIP Crypto Signals
   Winrate: 100.0% (2W/0L)
```

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- [ ] –°–∏–≥–Ω–∞–ª—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç—ã
- [ ] –í–∏–Ω—Ä–µ–π—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] VIP Channel: 100% (2 wins, 0 losses)
- [ ] Budget Channel: 0% (0 wins, 1 loss)
- [ ] Overall: 66.67% (2 wins, 1 loss)
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω –ª—É—á—à–∏–π –∫–∞–Ω–∞–ª

---

## üß™ –¢–µ—Å—Ç 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç

### –¶–µ–ª—å
–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã.

### –®–∞–≥–∏

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä** (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω):
```bash
Ctrl+C
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç:**

```bash
python3 test_integration.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
============================================================
üß™ Starting Integration Test
============================================================

‚úÖ Step 1: Storage initialized
üìä Step 2: Adding test channels...
   ‚úÖ Added channel: VIP Crypto Signals
   ‚úÖ Added channel: Free Trading Signals

üìà Step 3: Adding test signals...
   ‚úÖ Added 20 signals

üí∞ Step 4: Simulating signal closures...
   ‚úÖ Closed 20 signals
   ‚úÖ Wins: 11
   ‚úÖ Losses: 9

üìä Step 5: Calculating statistics...
   ‚úÖ Statistics updated

üîç Step 6: Verifying statistics...

üìà VIP Crypto Signals
   Total Signals: 10
   Closed: 10
   Wins: 7
   Losses: 3
   Winrate: 70.0%

üìâ Free Trading Signals
   Total Signals: 10
   Closed: 10
   Wins: 4
   Losses: 6
   Winrate: 40.0%

üìä Overall Summary:
   Total Channels: 2
   Total Signals: 20
   Total Wins: 11
   Total Losses: 9
   Overall Winrate: 55.0%

üèÜ Best Channel: VIP Crypto Signals (70.0%)
üìâ Worst Channel: Free Trading Signals (40.0%)

============================================================
‚úÖ VALIDATION
============================================================
‚úÖ Channel 1 winrate correct (70.0%)
‚úÖ Channel 2 winrate correct (40.0%)
‚úÖ Overall winrate correct (55.0%)

============================================================
üéâ ALL TESTS PASSED!
============================================================
```

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- [ ] –¢–µ—Å—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ 3 –ø—Ä–æ–≤–µ—Ä–∫–∏ winrate –ø—Ä–æ—à–ª–∏
- [ ] –ü–æ–∫–∞–∑–∞–Ω–æ "ALL TESTS PASSED"

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ localhost:7860
- [ ] –í—Å–µ 3 –≤–∫–ª–∞–¥–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞–º–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—É—Å—Ç—ã–µ –ø–æ–ª—è, TP < SL)
- [ ] –ö–∞–Ω–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –°–∏–≥–Ω–∞–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ
- [ ] –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (TP, SL, —Å—Ç–∞—Ç—É—Å, –∫–∞–Ω–∞–ª)
- [ ] –ö–Ω–æ–ø–∫–∞ Refresh –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –ó–∞–∫—Ä—ã—Ç—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Active

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –ö–∞–Ω–∞–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- [ ] Winrate —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ª—É—á—à–∏–π –∏ —Ö—É–¥—à–∏–π –∫–∞–Ω–∞–ª
- [ ] Refresh –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –†–∞—Å—á–µ—Ç –≤–∏–Ω—Ä–µ–π—Ç–∞
- [ ] –§–æ—Ä–º—É–ª–∞: (Wins / Closed) * 100%
- [ ] WIN = —Å–∏–≥–Ω–∞–ª –¥–æ—Å—Ç–∏–≥ TP
- [ ] LOSS = —Å–∏–≥–Ω–∞–ª –¥–æ—Å—Ç–∏–≥ SL
- [ ] Pending —Å–∏–≥–Ω–∞–ª—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ winrate

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] –í–∏–Ω—Ä–µ–π—Ç 70%, 40%, 55% –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

1. **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:**
```
data/
‚îî‚îÄ‚îÄ signals.json  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏
```

2. **–î–∞–Ω–Ω—ã–µ –≤ signals.json:**
```json
{
  "signals": [...],
  "channels": [...],
  "statistics": {
    "VIP Crypto Signals": {
      "total_signals": 2,
      "wins": 2,
      "losses": 0,
      "winrate": 100.0
    },
    "Budget Trading Channel": {
      "total_signals": 1,
      "wins": 0,
      "losses": 1,
      "winrate": 0.0
    }
  }
}
```

3. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   - –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–Ω—è—Ç –ª–∏ –ø–æ—Ä—Ç 7860
lsof -i :7860

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
kill -9 <PID>

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
python3 run.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --force-reinstall pydantic gradio pandas
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la data/

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
mkdir -p data
chmod 755 data
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞:
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–∏–≥–Ω–∞–ª—ã
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –≤–∏–Ω—Ä–µ–π—Ç
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- ‚úÖ –ë—ã—Ç—å –≥–æ—Ç–æ–≤–æ–π –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** ~20-30 –º–∏–Ω—É—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∏–Ω—Ä–µ–π—Ç–∞ —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª–æ–≤! üéâ
